# react-deploy-practice
github action을 활용한 react 프로젝트 S3, cloudfront, dns




## 필요이유
이전 프로젝트에서의 환경
 : 프론트엔드(CSR) + 백엔드 환경에서 백엔드 서버(EC2)의 리버스 프록시(NginX)에 빌드된 프론트엔드 정적 파일들을 둔 형태

### 이전 환경에서의 발생할 수 있는 문제점
1. 과도한 API 트래픽으로 백엔드 서버(EC2)가 불안정해질 경우 프론트 어플리케이션을 서빙할때 문제가 발생할 수 있음
   -> 클라이언트에서 화면 요청이 올 경우 Error Page가 뜨며 어플리케이션 전체가 멈춘듯한 경험을 줄 수도 있음
2. 반대로 페이지 요청 수가 과도하게 많아질 경우에도 정적 서빙뿐 아니라 API 성능까지 영향을 미칠 수 있음
   -> 즉, API서버와 화면 서빙이 서로 독립적이지 않고 연관성을 가져 서로의 성능에 영향을 끼칠 수 있음
3. CI/CD를 적용한 빌드 프로세스에서도 프론트엔드 환경과 백엔드 환경이 동일하여 서로의 환경에 영향을 끼칠 수 있음
   -> 백엔드 빌드가 완료될때 까지 프론트엔드가 기다려야 하는 등의 생산성 문제가 발생할 수 있음


## 해결방안
S3와 cloudfront를 활용하여 백엔드 서버에서 프론트 환경을 분리시켜 적용해보자


## 왜 S3일까?
 1. CSR로 빌드된 프로젝트의 경우, 브라우저가 읽을수 있는 index.html, 동적인 js파일, css, assets로 구성되고 이를 서빙하는 형태로 진행됨
 2. 즉 따로 해당 파일만 제공하면 SSR과 달리 이를 렌더링하는 서버가 필요 없음
 3. 따라서, 빌드한 파일들을 저장하고 클라이언트 요청 시 해당 파일에 접근 가능한 S3를 택할 수 있음



## 왜 CloudFront일까?
 1. S3의 정적파일을 캐싱하여 전세계 어디서 접근하던 빠른 속도로 파일을 제공할 수 있음
 2. S3에 대한 접근을 CloudFront를 통해 https를 쉽게 변환하고 SSL과 통합하여 보안을 강화할 수 있음
 3. 원천적으로 모든 접근을 AWS 계정 소유자가 아닌 이상 CloudFront를 통해서만 가능하게 함으로 원본 파일의 보안을 강화할 수 있음
 4. 대규모 트래픽으로 발생할 수 있는 지연을 추가 인프라 비용 없이 안정적으로 처리해줌


## 목표
이에 S3 + cloudfront로 프론트엔드 빌드 파일을 서빙하는 환경을 만들고 github action을 통해 레포지토리와 S3, cloudfront를 연결하여 CI/CD를 구축하는 것이 목표

## 진행할 단계
1. S3 저장소 만들기
2. CloudFront를 통해서 S3를 접근 가능하게 만들고 정적 파일을 캐싱하여 서빙하기
3. 도메인을 등록하여 CloudFront와 통합, Amazon Certificate Manager를 통해 인증서 발급받아 https 적용
4. Github action을 통해 여러 설정 알아보고 레포지토리 변경시 S3에 파일을 업로드하고 CloudFront에 캐싱되어있던 정적파일들 무효화 이후, 다시 캐싱되게 하기
 
